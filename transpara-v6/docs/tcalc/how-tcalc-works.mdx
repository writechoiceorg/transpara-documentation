---
id: how-tcalc-works
title: How tCalc Works
slug: how-tcalc-works
description: ''
tags: ['documentation']
---

tCalc is a flexible calculation engine built to handle user-defined calculations within a graph database environment. It allows for dynamic data input, supports various calculation templates, and provides efficient ways to process and output calculated results.

### Input Data/Variables

tCalc relies on a flexible mapping system to link external data sources to calculation inputs. By using mapping types, interface IDs, and detailed mapping configurations, users can define how data is retrieved and processed for calculations, ensuring that the system operates with up-to-date and relevant data.

- **Mapping Type:** In tCalc, mapping refers to how data from different sources or attributes is linked to specific variables or inputs within the calculation. The mapping type defines the nature of this linkage, determining whether it is static, dynamic, or pulled from an external data source.

- **Interface ID:** The Interface ID defines the specific data source or interface from which the data is retrieved. Each Interface ID corresponds to a unique interface that can connect to a data source, such as a database or an external service, to fetch the required input data for the calculations.

- **Mapping Config:** Mapping Config specifies the detailed configuration for how data should be retrieved and mapped to the variables within a calculation. It might include specific lookup operations, data transformations, or conditions that need to be applied when retrieving data from the source. The system uses this config to know exactly how to access and process the data from the interface defined by the Interface ID.

### Templates

Templates in tCalc are predefined structures that define how calculations should be performed. A template includes a set of statements, triggers, and variables that guide the calculation process. Templates can be reused across different objects and scenarios, allowing consistency and efficiency in calculations.

- **Create and Apply Templates:** You can create new calculation templates or apply existing templates to different objects or nodes within the tModel hierarchy. Templates help standardize calculations across similar objects, ensuring that the same logic and processes are applied consistently.

- **Version Control:** tCalc allows multiple template versions to be maintained. You can create a new template version, activate it when needed, and apply the updates across all instances that use that template. This helps manage changes in calculation logic without disrupting existing operations.

- **Customization:** Templates can be customized by modifying the statements they contain, adding or removing triggers, and altering the input and output configurations. This flexibility allows templates to be adapted to specific project needs.

- **Statements Compose the Template:** Statements in a template are the individual operations or steps that the calculation engine executes. They define how input data is processed to produce the output. The statements are executed in a defined order, from top to bottom, with each statement performing a specific calculation, transformation, or data aggregation.

### Output Data/Variables

Output data in tCalc results from the calculations defined by the template and its statements. These outputs can be linked to specific variables within the tModel hierarchy, such as KPIs or metrics. Outputs can be:

- **Dynamic:** If the output depends on dynamic inputs that change over time, the results will be updated accordingly based on the triggers defined in the template.
  
- **Static:** In some cases, outputs may be static if they are based on fixed inputs or predefined values.

Outputs are critical as they provide the final calculated values that can be used for further analysis, reporting, or decision-making within the tModel system.

### Data Connections

The following processes ensure that tCalc can dynamically interact with external data sources, maintain real-time accuracy, and effectively manage large-scale calculations across complex datasets.

- **Connecting to Databases:** tCalc connects to databases and other data sources using defined interfaces. Each interface is associated with an Interface ID, which specifies the database or external service to be accessed. The connection configuration, such as the database credentials, query parameters, or API endpoints, is defined in the Mapping Config.

- **Collecting Input Data:** The system retrieves input data by executing the mapping configurations against the connected databases or data sources. This data is then mapped to the appropriate input variables within the calculation template, allowing the calculations to use up-to-date information.

- **Sending Output Data:** Once the calculations are performed, the results (output data) can be stored back into the connected database or sent to another system via the same or different interfaces. This process is managed by configuring the output mappings, which determine where and how the calculated data should be sent or stored.